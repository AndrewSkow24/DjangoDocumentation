# Глава 2. Приступая к работе

Новичок в Django? Или вообще в веб-разработке? Хорошо, вы пришли
в правильное место: прочитайте этот материал, чтобы встать и побежать.

## 2.1. Первый взгляд на Django 

Так как Django был разработан в быстроменяющейся среде, он разработан 
для того, чтобы сделать частые задачи разработки быстро и легко. Это 
неформальный обзор как написать с помощью Django веб-приложение управления 
базой данных. 

Цель данного документа - дать вам достаточно технических спецификаций, 
чтобы понять, как Django работает, но мы не намереваемся создать руководство или 
документацию - мы совместим в одном. Когда вы будете готовы создать проект, вы можете начать с 
руководства или погрузиться глубже в более детальную документацию. 

### 2.1.1 Разработайте свою модель

Также вы можете использовать Django без базы данных с помощью 
объектно-реляционного преобразователя (ORM), в котором вы описываете вашу 
базу данных кодом Python. 

Синтаксис данных модели предлагает очень богатые возможности представления 
вашей модели - до сих пор это решало многолетнюю проблему схемы базы данных. 
Вот краткий пример: 

#### Листинг 1. news/models.py


```python

from django.db import models

class Reporter(models.Model):
    full_name = models.CharField(max_length=70)
    
    def __str__(self):
        return self.full_name
    
class Article(models.Model):
    pub_date = models.DateField()
    headline = models.CharField(max_length=200)
    content = models.TextField()
    reporter = models.ForeignKey(Reporter, on_delete=models.CASCADE)
    
    def __str__(self):
        return self.headline

```


### 2.1.2 Установите это 

Далее запустите Django-утилиту через командную строку, чтобы создать базу 
данных автоматически

```bash
python3 manage.py makemigrations
python3 manage.py migrate
```

Команда `makemigrations` проверяет все ваши доступные модели и создаёт 
миграции все таблицы для каждой модели. `migrate` запускает миграции и создаёт 
таблицы в вашей базе данных, а также опционально обеспечивает намного более гибкий контроль

### 2.1.3 Насладитесь свободным API

Вместе с тем, вы получаете свободный и богатый доступ к вашим данным 
с помощью Python API. API создаётся на лету, в генерации кода нет необходимости.

```bash
(.venv) andrejskovorodnikov@MacBook-Air-Andrej get_started % python3 manage.py shell
8 objects imported automatically (use -v 2 for details).
                                                                              
Python 3.11.3 (v3.11.3:f3909b8bc8, Apr  4 2023, 20:12:10) [Clang 13.0.0 (clang-1300.0.29.30)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> # Импортируем созданные модели из приложения "app"
>>> from news.models import Article, Reporter
>>> # Ни одного репортёра ещё нет в системе
>>> Reporter.objects.all()
<QuerySet []>
>>> # Создаём нового репортёра 
>>> r = Reporter(full_name = "John Smith")
>>> # Сохраняем объект в базу данные. Мы явно вызываем save(). 
>>> r.save()
>>> # Теперь у нас есть id
>>> r.id
1
>>> # Теперь репортёр в базе данных 
>>> Reporter.objects.all()
<QuerySet [<Reporter: John Smith>]>

>>> # Django предоставляет богатый API для поиска в базе данных
>>> Reporter.objects.get(id=1)
<Reporter: John Smith>
>>> Reporter.objects.get(full_name__startswith="John")
<Reporter: John Smith>
>>> Reporter.objects.get(full_name__contains="mith")
<Reporter: John Smith>
>>> Reporter.objects.get(id=2)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Users/andrejskovorodnikov/PycharmProjects/DjangoDocumentation/.venv/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/andrejskovorodnikov/PycharmProjects/DjangoDocumentation/.venv/lib/python3.11/site-packages/django/db/models/query.py", line 633, in get
    raise self.model.DoesNotExist(
news.models.Reporter.DoesNotExist: Reporter matching query does not exist.

>>> # Создание статьи 
>>> from datetime import date
>>> a=Article(pub_date=date.today(), headline="Django is cool", content="Yeah.", reporter=r)
>>> a.save()
>>> # теперь статья в базе данных
>>> Article.objects.all()
<QuerySet [<Article: Django is cool>]>

>>> # Объект статьи даёт с помощью API доступ к связанному объекту репортёра
>>> r = a.reporter
>>> r.full_name
'John Smith'

>>> # и наоборот объект репортёра даёт доступ к объекту статьи 
>>> r.article_set.all()
<QuerySet [<Article: Django is cool>]>


>>> # Можно изменить объект и вызвать save()
>>> r.full_name="Billy Goat"
>>> r.save()


>>> # Api следует за связями так далеко, как вам нужно, повышая эффективность и работая за сценой
>>> Article.objects.filter(reporter__full_name__startswith="Billy")
<QuerySet [<Article: Django is cool>]>

>>> # Удаление объекта с помощью delete()
>>> r.delete()
(2, {'news.Article': 1, 'news.Reporter': 1})

>>> exit()

```


### 2.1.4. Динамический интерфейс админа 